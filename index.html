<link rel="stylesheet" type="text/css" href="style.css">

<script>
	const {ipcRenderer} = require('electron')

	console.log("INIT");
	
	function win_close(){
		ipcRenderer.send('window-close');
	}
	function win_max() {
		ipcRenderer.send('window-max');
	}
	function win_min() {
		ipcRenderer.send('window-min');
	}
	function win_launch(){
		ipcRenderer.send("window-launch");
		launchOverlay(true);
	}
	
	function win_profiles(){
		ipcRenderer.send("window-profiles");
	}
	
	function launchOverlay(state) {
		if(state)
			document.getElementById("launchOverlay").style.display = "block";
		else
			document.getElementById("launchOverlay").style.display = "none";
	}	
   
    function profileOverlay(state) {
		if(state)
			document.getElementById("profileOverlay").style.display = "block";
		else{
			document.getElementById("profileOverlay").style.display = "none";
			setPath();
		}
	}
    
    function steamMode(){
        document.getElementById("ksp_path").disabled=true;
        document.getElementById("exeVersion").style.display='inline';
    }
  
    function manualMode(){
      document.getElementById("ksp_path").disabled=false;
      document.getElementById("exeVersion").style.display='none';
    }
	
	function setPath(){
		ipcRenderer.send("set-path", document.getElementById("ksp_path").value);
	}
  
	function getPath(){
	}
  
    function setExe(exe){
        document.getElementById("ksp_path").value = "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\\"+exe+".exe";
    }
	
</script>

<body>
	<header>
        <a class="menu" id="profiles" onclick="profileOverlay(true)">Profiles</a>
		<a class="close" id="close" onclick="win_close()">&times;</a>
		<a class="close" id="max" onclick="win_max()">&square;</a>
		<a class="close" id="min" onclick="win_min()">&#95;</a>
	</header>
	
	<div class="overlay" id="launchOverlay" >
		<content>
          <h1>Game Launched</h1>
		<br/><br/><br/><br/>
		<a onclick="launchOverlay(false)">Dismiss</a>
		</content>
	</div>
  
    <div class="overlay" id="profileOverlay">
          <content>
            <h1>Profiles</h1>
            <br/>
              Installion mode: 
              <label class="container">Steam
                <input type="radio" name="radio" checked='true' onchange="steamMode()">
                <span class="checkmark"></span>
              </label>
              <label class="container">Manual
                <input type="radio" name="radio" onchange="manualMode()">
                <span class="checkmark"></span>
              </label>
			  
			  <div id="exeVersion" style="display:inline">
                <br/>
				  Exe version: 
				  <label class="container">64 bit
					<input type="radio" name="exeVersion" checked='true' onchange="setExe('KSP_x64')">
					<span class="checkmark"></span>
				  </label>
				  <label class="container">32 bit
					<input type="radio" name="exeVersion" onchange="setExe('KSP')">
					<span class="checkmark"></span>
				  </label>
			  </div>
              
              <p>
                Path:
                <input type="text" class="text" id="ksp_path" value="C:\Program Files (x86)\Steam\steamapps\common\Kerbal Space Program\KSP_x64.exe" disabled></input>
              </p>
              
              <br/>
              <a onclick="profileOverlay(false)">Confirm</a>
          </content>
      </div>  
	
	
	
	<footer>
		<a class="launch" onclick="win_launch()"><span>Launch!</span><img src="launch.svg"/></a>
	</footer>
</body>
